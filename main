import logging
from ai_models import EnhancedAI
from utils import install_playwright, list_files
from git_operations import git_commit_and_push

def main():
    # Set up logging
    logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
    logger = logging.getLogger(__name__)

    logger.info("Synthetic Souls AI Composition Engine started")
    
    # Log all files in the folder
    logger.info("Listing all files in the project folder:")
    list_files()
    
    # Initialize the EnhancedAI with the udioapi token
    udioapi_token = "YOUR_UDIOAPI_TOKEN_HERE"
    enhanced_ai = EnhancedAI(udioapi_token)
    
    # Add main logic for AI composition here
    logger.info("Generating humorous AI composition...")
    
    # Generate funny lyrics
    funny_lyrics = enhanced_ai.generate_funny_lyrics("Human.exe")
    logger.info(f"Generated funny lyrics:\n{funny_lyrics}")
    
    # Create amusing sound effects
    sound_effects = enhanced_ai.create_amusing_sound_effects(["computer_error", "robot_dance", "dial_up_internet"])
    logger.info(f"Created amusing sound effects: {sound_effects}")
    
    # Generate a quirky melody
    quirky_melody = enhanced_ai.generate_quirky_melody(genre="electronic_pop", quirkiness_level=8)
    logger.info(f"Generated quirky melody: {quirky_melody}")
    
    # Combine elements into a funny composition
    funny_composition = enhanced_ai.combine_elements(funny_lyrics, sound_effects, quirky_melody)
    logger.info(f"Created funny composition: {funny_composition}")
    
    logger.info("Synthetic Souls AI Composition Engine completed its cycle")

    # Commit and push changes to git
    try:
        git_commit_and_push("Update from Synthetic Souls AI Composition Engine: Added humorous elements")
    except Exception as e:
        logger.error(f"Failed to push changes: {str(e)}")
        logger.info("Changes were committed but not pushed. You may need to push manually.")

if __name__ == "__main__":
    main()
